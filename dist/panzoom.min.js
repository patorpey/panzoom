/**
* Panzoom for panning and zooming elements using CSS transforms
* Copyright Timmy Willison and other contributors
* https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Panzoom=e()}(this,function(){"use strict";function r(t,e){return parseFloat(e[t])||0}function i(t,e,n=window.getComputedStyle(t)){var o="border"===e?"Width":"";return{left:r(`${e}Left${o}`,n),right:r(`${e}Right${o}`,n),top:r(`${e}Top${o}`,n),bottom:r(`${e}Bottom${o}`,n)}}function T(t,e,n){t.style[e]=n}function C(t){const e=t.parentNode;var n=window.getComputedStyle(t),o=window.getComputedStyle(e),r=t.getBoundingClientRect(),a=e.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,top:r.top,bottom:r.bottom,left:r.left,right:r.right,margin:i(t,"margin",n),border:i(t,"border",n)},parent:{style:o,width:a.width,height:a.height,top:a.top,bottom:a.bottom,left:a.left,right:a.right,padding:i(e,"padding",o),border:i(e,"border",o)}}}let N={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function I(t,e,n,o){N[t].split(" ").forEach(t=>{e.addEventListener(t,n,o)})}function L(t,e,n){N[t].split(" ").forEach(t=>{e.removeEventListener(t,n)})}"undefined"!=typeof window&&("function"==typeof window.PointerEvent?N={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(N={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));const V=/^http:[\w\.\/]+svg$/;function W(t,e){let n=t.length;for(;n--;)if(t[n].pointerId===e.pointerId)return n;return-1}function Z(t,e){let n;if(e.touches){n=0;for(const o of e.touches)o.pointerId=n++,Z(t,o)}else n=W(t,e),-1<n&&t.splice(n,1),t.push(e)}function q(t){let e=(t=t.slice(0)).pop();for(var n;n=t.pop();)e={clientX:(n.clientX-e.clientX)/2+e.clientX,clientY:(n.clientY-e.clientY)/2+e.clientY};return e}function B(t){if(t.length<2)return 0;var e=t[0],t=t[1];return Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2)}
/**
   * Panzoom for panning and zooming elements using CSS transforms
   * https://github.com/timmywil/panzoom
   *
   * Copyright Timmy Willison and other contributors
   * Released under the MIT license
   * https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
   *
   */
const D={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:t=>{t.preventDefault(),t.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,relative:!1,setTransform:function(t,{x:e,y:n,scale:o,isSVG:r},a){T(t,"transform",`scale(${o}) translate(${e}px, ${n}px)`),r&&(r=window.getComputedStyle(t).getPropertyValue("transform"),t.setAttribute("transform",r))},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function t(r,i){if(!r)throw new Error("Panzoom requires an element as an argument");if(1!==r.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(!function(t){const e=t.ownerDocument;return t=t.parentNode,e&&t&&9===e.nodeType&&1===t.nodeType&&e.documentElement.contains(t)}(r))throw new Error("Panzoom should be called on elements that have been attached to the DOM");i={...D,...i};const l=(t=r,V.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase());var t;const n=r.parentNode;n.style.overflow=i.overflow,n.style.userSelect="none",n.style.touchAction=i.touchAction,(i.canvas?n:r).style.cursor=i.cursor,r.style.userSelect="none",r.style.touchAction=i.touchAction,r.style.willChange="transform",T(r,"transformOrigin","string"==typeof i.origin?i.origin:l?"0 0":"50% 50%");let s=0,c=0,p=1,o=!1,a=!1,d;function u(t,e,n){n.silent||(e=new CustomEvent(t,{detail:e}),r.dispatchEvent(e))}function m(t,e,n){const o={x:s,y:c,scale:p,isSVG:l,originalEvent:n};return requestAnimationFrame(()=>{"boolean"==typeof e.animate&&(e.animate&&!a?(a=!0,T(r,"transition",`transform ${e.duration}ms ${e.easing}`)):a&&(a=!1,T(r,"transition","none"))),e.setTransform(r,o,e)}),u(t,o,e),u("panzoomchange",o,e),o}function h(){var t,e;i.contain&&(d=C(r),t=d.parent.width-d.parent.border.left-d.parent.border.right,e=d.parent.height-d.parent.border.top-d.parent.border.bottom,t=t/(d.elem.width/p),e=e/(d.elem.height/p),"inside"===i.contain?i.maxScale=Math.min(t,e):"outside"===i.contain&&(i.minScale=Math.max(t,e)))}function f(t,e,n,o){var r={...i,...o};const a={x:s,y:c,opts:r};return!r.force&&(r.disablePan||r.panOnlyWhenZoomed&&p===r.startScale)||(t=parseFloat(t),e=parseFloat(e),r.disableXAxis||(a.x=(r.relative?s:0)+t),r.disableYAxis||(a.y=(r.relative?c:0)+e),"inside"===r.contain?(a.x=Math.max(-d.elem.margin.left-d.parent.padding.left,Math.min(d.parent.width-d.elem.width/n-d.parent.padding.left-d.elem.margin.left-d.parent.border.left-d.parent.border.right,a.x)),a.y=Math.max(-d.elem.margin.top-d.parent.padding.top,Math.min(d.parent.height-d.elem.height/n-d.parent.padding.top-d.elem.margin.top-d.parent.border.top-d.parent.border.bottom,a.y))):"outside"===r.contain&&(e=((t=(o=d.elem.width/p)*n)-o)/2,r=((o=(r=d.elem.height/p)*n)-r)/2,t=(-(t-d.parent.width)-d.parent.padding.left-d.parent.border.left-d.parent.border.right+e)/n,e=(e-d.parent.padding.left)/n,a.x=Math.max(Math.min(a.x,e),t),o=(-(o-d.parent.height)-d.parent.padding.top-d.parent.border.top-d.parent.border.bottom+r)/n,n=(r-d.parent.padding.top)/n,a.y=Math.max(Math.min(a.y,n),o))),a}function g(t,e){e={...i,...e};const n={scale:p,opts:e};return!e.force&&e.disableZoom||(n.scale=Math.min(Math.max(t,e.minScale),e.maxScale)),n}function y(t,e,n,o){e=f(t,e,p,n),n=e.opts;return s=e.x,c=e.y,m("panzoompan",n,o)}function v(n,o,r){var a=g(n,o),o=a.opts;if(o.force||!o.disableZoom){n=a.scale;let t=s,e=c;o.point?(t=o.point.x,e=o.point.y):o.focal&&(i=o.focal,t=(i.x/n-i.x/p+s*n)/n,e=(i.y/n-i.y/p+c*n)/n);var i=f(t,e,n,{relative:!1,force:!0});return s=i.x,c=i.y,p=n,m("panzoomzoom",o,r)}}function e(t,e){e={...i,animate:!0,...e};return v(p*Math.exp((t?1:-1)*e.step),e)}function w(t,e,n,o){var r={width:d.parent.width-d.parent.padding.left-d.parent.padding.right-d.parent.border.left-d.parent.border.right,height:d.parent.height-d.parent.padding.top-d.parent.padding.bottom-d.parent.border.top-d.parent.border.bottom};let a=e.clientX-d.parent.left-d.parent.padding.left-d.parent.border.left-d.elem.margin.left,i=e.clientY-d.parent.top-d.parent.padding.top-d.parent.border.top-d.elem.margin.top;l||(a-=d.elem.width/p/2,i-=d.elem.height/p/2);r={x:a/r.width*(r.width*t),y:i/r.height*(r.height*t)};return v(t,{animate:!1,...n,focal:r},o)}v(i.startScale,{animate:!1}),setTimeout(()=>{h(),y(i.startX,i.startY,{animate:!1})});let b,x,S,P,A,O;const z=[];function E(t){!function(e,n){for(let t=e;null!=t;t=t.parentNode)if(o=t,r=n.excludeClass,o.classList.contains(r)||n.exclude.includes(t))return 1;var o,r}(t.target,i)&&(Z(z,t),o=!0,i.handleStartEvent(t),b=s,x=c,d=C(r),u("panzoomstart",{x:s,y:c,scale:p,isSVG:l,originalEvent:t},i),t=q(z),S=t.clientX,P=t.clientY,A=p,O=B(z))}function M(t){var e;o&&void 0!==b&&void 0!==x&&void 0!==S&&void 0!==P&&(Z(z,t),e=q(z),1<z.length?(0===O&&(O=B(z)),w(g((B(z)-O)*i.step/80+A).scale,e)):y(b+(e.clientX-S)/p,x+(e.clientY-P)/p,{animate:!1},t))}function X(t){1===z.length&&u("panzoomend",{x:s,y:c,scale:p,isSVG:l,originalEvent:t},i),function(t,e){if(e.touches)for(;t.length;)t.pop();else{e=W(t,e);-1<e&&t.splice(e,1)}}(z,t),o&&(o=!1,b=x=S=P=void 0)}let Y=!1;function $(){Y||(Y=!0,I("down",i.canvas?n:r,E),I("move",document,M,{passive:!0}),I("up",document,X,{passive:!0}))}return i.noBind||$(),{bind:$,destroy:function(){Y=!1,L("down",i.canvas?n:r,E),L("move",document,M),L("up",document,X)},eventNames:N,getPan:()=>({x:s,y:c}),getScale:()=>p,getOptions:()=>function(t){const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(i),pan:y,reset:function(t){var e={...i,animate:!0,force:!0,...t};return p=g(e.startScale,e).scale,t=f(e.startX,e.startY,p,e),s=t.x,c=t.y,m("panzoomreset",e)},resetStyle:function(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",r.style.cursor="",r.style.userSelect="",r.style.touchAction="",T(r,"transformOrigin","")},setOptions:function(t={}){for(const e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);(t.hasOwnProperty("cursor")||t.hasOwnProperty("canvas"))&&(n.style.cursor=r.style.cursor="",(i.canvas?n:r).style.cursor=i.cursor),t.hasOwnProperty("overflow")&&(n.style.overflow=t.overflow),t.hasOwnProperty("touchAction")&&(n.style.touchAction=t.touchAction,r.style.touchAction=t.touchAction),(t.hasOwnProperty("minScale")||t.hasOwnProperty("maxScale")||t.hasOwnProperty("contain"))&&h()},setStyle:(t,e)=>T(r,t,e),zoom:v,zoomIn:function(t){return e(!0,t)},zoomOut:function(t){return e(!1,t)},zoomToPoint:w,zoomWithWheel:function(t,e){t.preventDefault();var n={...i,...e},e=(0===t.deltaY&&t.deltaX?t.deltaX:t.deltaY)<0?1:-1;return w(g(p*Math.exp(e*n.step/3),n).scale,t,n)}}}return t.defaultOptions=D,t});