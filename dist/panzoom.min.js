/**
* Panzoom for panning and zooming elements using CSS transforms
* Copyright Timmy Willison and other contributors
* https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Panzoom=t()}(this,function(){"use strict";function r(e,t){return parseFloat(t[e])||0}function i(e,t,n=window.getComputedStyle(e)){var o="border"===t?"Width":"";return{left:r(`${t}Left${o}`,n),right:r(`${t}Right${o}`,n),top:r(`${t}Top${o}`,n),bottom:r(`${t}Bottom${o}`,n)}}function T(e,t,n){e.style[t]=n}function C(e){const t=e.parentNode;var n=window.getComputedStyle(e),o=window.getComputedStyle(t),r=e instanceof SVGGraphicsElement?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight},a=t.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,margin:i(e,"margin",n),border:i(e,"border",n)},parent:{style:o,width:a.width,height:a.height,top:a.top,bottom:a.bottom,left:a.left,right:a.right,padding:i(t,"padding",o),border:i(t,"border",o)}}}let G={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function V(e,t,n,o){G[e].split(" ").forEach(e=>{t.addEventListener(e,n,o)})}function N(e,t,n){G[e].split(" ").forEach(e=>{t.removeEventListener(e,n)})}"undefined"!=typeof window&&("function"==typeof window.PointerEvent?G={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(G={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));const W=/^http:[\w\.\/]+svg$/;function B(e,t){let n=e.length;for(;n--;)if(e[n].pointerId===t.pointerId)return n;return-1}function D(e,t){let n;if(t.touches){n=0;for(const o of t.touches)o.pointerId=n++,D(e,o)}else n=B(e,t),-1<n&&e.splice(n,1),e.push(t)}function I(e){let t=(e=e.slice(0)).pop();for(var n;n=e.pop();)t={clientX:(n.clientX-t.clientX)/2+t.clientX,clientY:(n.clientY-t.clientY)/2+t.clientY};return t}function L(e){if(e.length<2)return 0;var t=e[0],e=e[1];return Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2)}
/**
   * Panzoom for panning and zooming elements using CSS transforms
   * https://github.com/timmywil/panzoom
   *
   * Copyright Timmy Willison and other contributors
   * Released under the MIT license
   * https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
   *
   */
const Z={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:e=>{e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,relative:!1,setTransform:function(e,{x:t,y:n,scale:o,isSVG:r},a){T(e,"transform",`translate(${o*t}px, ${o*n}px) scale(${o})`),r&&(r=window.getComputedStyle(e).getPropertyValue("transform"),e.setAttribute("transform",r))},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function e(l,c){if(!l)throw new Error("Panzoom requires an element as an argument");if(1!==l.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(!function(e){const t=e.ownerDocument;return e=e.parentNode,t&&e&&9===t.nodeType&&1===e.nodeType&&t.documentElement.contains(e)}(l))throw new Error("Panzoom should be called on elements that have been attached to the DOM");c={...Z,...c};const s=(e=l,W.test(e.namespaceURI)&&"svg"!==e.nodeName.toLowerCase());var e;const n=l.parentNode;n.style.overflow=c.overflow,n.style.userSelect="none",n.style.touchAction=c.touchAction,(c.canvas?n:l).style.cursor=c.cursor,l.style.userSelect="none",l.style.touchAction=c.touchAction,l.style.willChange="transform",T(l,"transformOrigin","string"==typeof c.origin?c.origin:s?"0 0":"50% 50%");let p=0,d=0,u=1,o=!1,r=!1,h=C(l);function a(e,t,n){n.silent||(t=new CustomEvent(e,{detail:t}),l.dispatchEvent(t))}function m(e,t,n){const o={x:p,y:d,scale:u,isSVG:s,originalEvent:n};return requestAnimationFrame(()=>{"boolean"==typeof t.animate&&t.animate!==r&&(t.animate?T(l,"transition",`transform ${t.duration}ms ${t.easing}`):T(l,"transition","none"),r=t.animate),t.setTransform(l,o,t),a(e,o,t),a("panzoomchange",o,t)}),o}function i(){var e,t;c.contain&&(h=C(l),e=h.parent.width-h.parent.border.left-h.parent.border.right,t=h.parent.height-h.parent.border.top-h.parent.border.bottom,e=e/(h.elem.width||1),t=t/(h.elem.height||1),"inside"===c.contain?c.maxScale=Math.min(e,t):"outside"===c.contain&&(c.minScale=Math.max(e,t)))}function f(e,t,n,o){var r,a,i,l={...c,...o};const s={x:p,y:d,opts:l};return!l.force&&(l.disablePan||l.panOnlyWhenZoomed&&u===l.startScale)||(e=parseFloat(e),t=parseFloat(t),l.disableXAxis||(s.x=(l.relative?p:0)+e),l.disableYAxis||(s.y=(l.relative?d:0)+t),l.contain&&(i=((a=(r=h.elem.width)*n)-r)/2,t=((e=(o=h.elem.height)*n)-o)/2,"inside"===l.contain?(r=(-h.elem.margin.left-h.parent.padding.left+i)/n,o=(h.parent.width-a-h.parent.padding.left-h.elem.margin.left-h.parent.border.left-h.parent.border.right+i)/n,s.x=Math.max(Math.min(s.x,o),r),o=(-h.elem.margin.top-h.parent.padding.top+t)/n,r=(h.parent.height-e-h.parent.padding.top-h.elem.margin.top-h.parent.border.top-h.parent.border.bottom+t)/n,s.y=Math.max(Math.min(s.y,r),o)):"outside"===l.contain&&(a=(-(a-h.parent.width)-h.parent.padding.left-h.parent.border.left-h.parent.border.right+i)/n,i=(i-h.parent.padding.left)/n,s.x=Math.max(Math.min(s.x,i),a),e=(-(e-h.parent.height)-h.parent.padding.top-h.parent.border.top-h.parent.border.bottom+t)/n,n=(t-h.parent.padding.top)/n,s.y=Math.max(Math.min(s.y,n),e))),l.roundPixels&&(s.x=Math.round(s.x),s.y=Math.round(s.y))),s}function g(e,t){t={...c,...t};const n={scale:u,opts:t};return!t.force&&t.disableZoom||(n.scale=Math.min(Math.max(e,t.minScale),t.maxScale)),n}function y(e,t,n,o){n=f(e,t,u,n);return p!==n.x||d!==n.y?(p=n.x,d=n.y,m("panzoompan",n.opts,o)):{x:p,y:d,scale:u,isSVG:s,originalEvent:o}}function v(n,o,r){var a=g(n,o),o=a.opts;if(o.force||!o.disableZoom){n=a.scale;let e=p,t=d;o.point?(h=C(l),e=h.elem.width/2-o.point.x-h.elem.width/2/n+h.parent.width/2/n,t=h.elem.height/2-o.point.y-h.elem.height/2/n+h.parent.height/2/n):o.focal&&(i=o.focal,e=(i.x/n-i.x/u+p*n)/n,t=(i.y/n-i.y/u+d*n)/n);var i=f(e,t,n,{relative:!1,force:!0});return p=i.x,d=i.y,u=n,m("panzoomzoom",o,r)}}function t(e,t){t={...c,animate:!0,...t};return v(u*Math.exp((e?1:-1)*t.step),t)}function w(e,t,n,o){var r={width:h.parent.width-h.parent.padding.left-h.parent.padding.right-h.parent.border.left-h.parent.border.right,height:h.parent.height-h.parent.padding.top-h.parent.padding.bottom-h.parent.border.top-h.parent.border.bottom};let a=t.clientX-h.parent.left-h.parent.padding.left-h.parent.border.left-h.elem.margin.left,i=t.clientY-h.parent.top-h.parent.padding.top-h.parent.border.top-h.elem.margin.top;s||(a-=h.elem.width/2,i-=h.elem.height/2);r={x:a/r.width*(r.width*e),y:i/r.height*(r.height*e)};return v(e,{...n,animate:!1,focal:r},o)}v(c.startScale,{animate:!1,force:!0}),setTimeout(()=>{i(),y(c.startX,c.startY,{animate:!1,force:!0})});let x,b,S,P,E,M;const A=[];function O(e){!function(t,n){for(let e=t;null!=e;e=e.parentNode)if(o=e,r=n.excludeClass,1===o.nodeType&&o.classList.contains(r)||n.exclude.includes(e))return 1;var o,r}(e.target,c)&&(D(A,e),o=!0,c.handleStartEvent(e),x=p,b=d,h=C(l),a("panzoomstart",{x:p,y:d,scale:u,isSVG:s,originalEvent:e},c),e=I(A),S=e.clientX,P=e.clientY,E=u,M=L(A))}function z(e){var t;o&&void 0!==x&&void 0!==b&&void 0!==S&&void 0!==P&&(D(A,e),t=I(A),1<A.length?(0===M&&(M=L(A)),w(g((L(A)-M)*c.step/80+E).scale,t,{animate:!1},e)):y(x+(t.clientX-S)/u,b+(t.clientY-P)/u,{animate:!1},e))}function X(e){1===A.length&&a("panzoomend",{x:p,y:d,scale:u,isSVG:s,originalEvent:e},c),function(e,t){if(t.touches)for(;e.length;)e.pop();else{t=B(e,t);-1<t&&e.splice(t,1)}}(A,e),o&&(o=!1,x=b=S=P=void 0)}let Y=!1;function $(){Y||(Y=!0,V("down",c.canvas?n:l,O),V("move",document,z,{passive:!0}),V("up",document,X,{passive:!0}))}return c.noBind||$(),{bind:$,destroy:function(){Y=!1,N("down",c.canvas?n:l,O),N("move",document,z),N("up",document,X)},eventNames:G,getPan:()=>({x:p,y:d}),getScale:()=>u,getOptions:()=>function(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(c),handleDown:O,handleMove:z,handleUp:X,pan:y,reset:function(e){var t={...c,animate:!0,force:!0,...e};return u=g(t.startScale,t).scale,e=f(t.startX,t.startY,u,t),p=e.x,d=e.y,m("panzoomreset",t)},resetStyle:function(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",l.style.cursor="",l.style.userSelect="",l.style.touchAction="",T(l,"transformOrigin","")},setOptions:function(e={}){for(const t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);(e.hasOwnProperty("cursor")||e.hasOwnProperty("canvas"))&&(n.style.cursor=l.style.cursor="",(c.canvas?n:l).style.cursor=c.cursor),e.hasOwnProperty("overflow")&&(n.style.overflow=e.overflow),e.hasOwnProperty("touchAction")&&(n.style.touchAction=e.touchAction,l.style.touchAction=e.touchAction),(e.hasOwnProperty("minScale")||e.hasOwnProperty("maxScale")||e.hasOwnProperty("contain"))&&i()},setStyle:(e,t)=>T(l,e,t),zoom:v,zoomIn:function(e){return t(!0,e)},zoomOut:function(e){return t(!1,e)},zoomToPoint:w,zoomWithWheel:function(e,t){e.preventDefault();var n={...c,...t,animate:!1},t=(0===e.deltaY&&e.deltaX?e.deltaX:e.deltaY)<0?1:-1;return w(g(u*Math.exp(t*n.step/3),n).scale,e,n,e)}}}return e.defaultOptions=Z,e});