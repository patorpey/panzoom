/**
* Panzoom for panning and zooming elements using CSS transforms
* Copyright Timmy Willison and other contributors
* https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Panzoom=e()}(this,function(){"use strict";const i="undefined"!=typeof document&&!!document.documentMode;let a;const l=["webkit","moz","ms"],s={};function X(t){if(s[t])return s[t];var e=a=a||document.createElement("div").style;if(t in e)return s[t]=t;var n=t[0].toUpperCase()+t.slice(1);let o=l.length;for(;o--;){var r=`${l[o]}${n}`;if(r in e)return s[t]=r}}function r(t,e){return parseFloat(e[X(t)])||0}function c(t,e,n=window.getComputedStyle(t)){var o="border"===e?"Width":"";return{left:r(`${e}Left${o}`,n),right:r(`${e}Right${o}`,n),top:r(`${e}Top${o}`,n),bottom:r(`${e}Bottom${o}`,n)}}function Y(t,e,n){t.style[X(e)]=n}function T(t){const e=t.parentNode;var n=window.getComputedStyle(t),o=window.getComputedStyle(e),r=t.getBoundingClientRect(),a=e.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,top:r.top,bottom:r.bottom,left:r.left,right:r.right,margin:c(t,"margin",n),border:c(t,"border",n)},parent:{style:o,width:a.width,height:a.height,top:a.top,bottom:a.bottom,left:a.left,right:a.right,padding:c(e,"padding",o),border:c(e,"border",o)}}}let C={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function N(t,e,n,o){C[t].split(" ").forEach(t=>{e.addEventListener(t,n,o)})}function I(t,e,n){C[t].split(" ").forEach(t=>{e.removeEventListener(t,n)})}"undefined"!=typeof window&&("function"==typeof window.PointerEvent?C={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(C={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));const V=/^http:[\w\.\/]+svg$/;function W(t,e){let n=t.length;for(;n--;)if(t[n].pointerId===e.pointerId)return n;return-1}function Z(t,e){let n;if(e.touches){n=0;for(const o of e.touches)o.pointerId=n++,Z(t,o)}else n=W(t,e),-1<n&&t.splice(n,1),t.push(e)}function q(t){let e=(t=t.slice(0)).pop();for(var n;n=t.pop();)e={clientX:(n.clientX-e.clientX)/2+e.clientX,clientY:(n.clientY-e.clientY)/2+e.clientY};return e}function B(t){if(t.length<2)return 0;var e=t[0],t=t[1];return Math.sqrt(Math.pow(Math.abs(t.clientX-e.clientX),2)+Math.pow(Math.abs(t.clientY-e.clientY),2))}
/**
   * Panzoom for panning and zooming elements using CSS transforms
   * https://github.com/timmywil/panzoom
   *
   * Copyright Timmy Willison and other contributors
   * Released under the MIT license
   * https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
   *
   */
const D={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:t=>{t.preventDefault(),t.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,relative:!1,setTransform:function(t,{x:e,y:n,scale:o,isSVG:r},a){Y(t,"transform",`scale(${o}) translate(${e}px, ${n}px)`),r&&i&&(r=window.getComputedStyle(t).getPropertyValue("transform"),t.setAttribute("transform",r))},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function t(s,l){if(!s)throw new Error("Panzoom requires an element as an argument");if(1!==s.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(!function(t){const e=t.ownerDocument;return t=t.parentNode,e&&t&&9===e.nodeType&&1===t.nodeType&&e.documentElement.contains(t)}(s))throw new Error("Panzoom should be called on elements that have been attached to the DOM");l={...D,...l};const c=(t=s,V.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase());var t;const n=s.parentNode;n.style.overflow=l.overflow,n.style.userSelect="none",n.style.touchAction=l.touchAction,(l.canvas?n:s).style.cursor=l.cursor,s.style.userSelect="none",s.style.touchAction=l.touchAction,Y(s,"transformOrigin","string"==typeof l.origin?l.origin:c?"0 0":"50% 50%");let p=0,d=0,u=1,o=!1;function r(t,e,n){n.silent||(e=new CustomEvent(t,{detail:e}),s.dispatchEvent(e))}function m(t,e,n){const o={x:p,y:d,scale:u,isSVG:c,originalEvent:n};return requestAnimationFrame(()=>{var t;"boolean"==typeof e.animate&&(e.animate?(t=e,Y(s,"transition",`${X("transform")} ${t.duration}ms ${t.easing}`)):Y(s,"transition","none")),e.setTransform(s,o,e)}),r(t,o,e),r("panzoomchange",o,e),o}function a(){var t,e,n;l.contain&&(e=(n=T(s)).parent.width-n.parent.border.left-n.parent.border.right,t=n.parent.height-n.parent.border.top-n.parent.border.bottom,e=e/(n.elem.width/u),n=t/(n.elem.height/u),"inside"===l.contain?l.maxScale=Math.min(e,n):"outside"===l.contain&&(l.minScale=Math.max(e,n)))}function h(t,e,n,o){var r,a={...l,...o};const i={x:p,y:d,opts:a};return!a.force&&(a.disablePan||a.panOnlyWhenZoomed&&u===a.startScale)||(t=parseFloat(t),e=parseFloat(e),a.disableXAxis||(i.x=(a.relative?p:0)+t),a.disableYAxis||(i.y=(a.relative?d:0)+e),"inside"===a.contain?(r=T(s),i.x=Math.max(-r.elem.margin.left-r.parent.padding.left,Math.min(r.parent.width-r.elem.width/n-r.parent.padding.left-r.elem.margin.left-r.parent.border.left-r.parent.border.right,i.x)),i.y=Math.max(-r.elem.margin.top-r.parent.padding.top,Math.min(r.parent.height-r.elem.height/n-r.parent.padding.top-r.elem.margin.top-r.parent.border.top-r.parent.border.bottom,i.y))):"outside"===a.contain&&(t=(o=T(s)).elem.width/u,a=((r=(e=o.elem.height/u)*n)-e)/2,t=(-((e=t*n)-o.parent.width)-o.parent.padding.left-o.parent.border.left-o.parent.border.right+(e=(e-t)/2))/n,e=(e-o.parent.padding.left)/n,i.x=Math.max(Math.min(i.x,e),t),r=(-(r-o.parent.height)-o.parent.padding.top-o.parent.border.top-o.parent.border.bottom+a)/n,n=(a-o.parent.padding.top)/n,i.y=Math.max(Math.min(i.y,n),r))),i}function f(t,e){e={...l,...e};const n={scale:u,opts:e};return!e.force&&e.disableZoom||(n.scale=Math.min(Math.max(t,e.minScale),e.maxScale)),n}function i(t,e,n,o){e=h(t,e,u,n),n=e.opts;return p=e.x,d=e.y,m("panzoompan",n,o)}function g(n,o,r){var a=f(n,o),o=a.opts;if(o.force||!o.disableZoom){n=a.scale;let t=p,e=d;o.focal&&(i=o.focal,t=(i.x/n-i.x/u+p*n)/n,e=(i.y/n-i.y/u+d*n)/n);var i=h(t,e,n,{relative:!1,force:!0});return p=i.x,d=i.y,u=n,m("panzoomzoom",o,r)}}function e(t,e){e={...l,animate:!0,...e};return g(u*Math.exp((t?1:-1)*e.step),e)}function y(t,e,n,o){var r=T(s),a={width:r.parent.width-r.parent.padding.left-r.parent.padding.right-r.parent.border.left-r.parent.border.right,height:r.parent.height-r.parent.padding.top-r.parent.padding.bottom-r.parent.border.top-r.parent.border.bottom};let i=e.clientX-r.parent.left-r.parent.padding.left-r.parent.border.left-r.elem.margin.left,l=e.clientY-r.parent.top-r.parent.padding.top-r.parent.border.top-r.elem.margin.top;c||(i-=r.elem.width/u/2,l-=r.elem.height/u/2);a={x:i/a.width*(a.width*t),y:l/a.height*(a.height*t)};return g(t,{animate:!1,...n,focal:a},o)}g(l.startScale,{animate:!1}),setTimeout(()=>{a(),i(l.startX,l.startY,{animate:!1})});let v,w,b,x,S,M;const O=[];function P(t){!function(e,n){for(let t=e;null!=t;t=t.parentNode)if(o=t,r=n.excludeClass,1===o.nodeType&&-1<` ${o=o,(o.getAttribute("class")||"").trim()} `.indexOf(` ${r} `)||-1<n.exclude.indexOf(t))return 1;var o,r}(t.target,l)&&(Z(O,t),o=!0,l.handleStartEvent(t),v=p,w=d,r("panzoomstart",{x:p,y:d,scale:u,isSVG:c,originalEvent:t},l),t=q(O),b=t.clientX,x=t.clientY,S=u,M=B(O))}function A(t){var e;o&&void 0!==v&&void 0!==w&&void 0!==b&&void 0!==x&&(Z(O,t),e=q(O),1<O.length?(0===M&&(M=B(O)),y(f((B(O)-M)*l.step/80+S).scale,e)):i(v+(e.clientX-b)/u,w+(e.clientY-x)/u,{animate:!1},t))}function $(t){1===O.length&&r("panzoomend",{x:p,y:d,scale:u,isSVG:c,originalEvent:t},l),function(t,e){if(e.touches)for(;t.length;)t.pop();else{e=W(t,e);-1<e&&t.splice(e,1)}}(O,t),o&&(o=!1,v=w=b=x=void 0)}let z=!1;function E(){z||(z=!0,N("down",l.canvas?n:s,P),N("move",document,A,{passive:!0}),N("up",document,$,{passive:!0}))}return l.noBind||E(),{bind:E,destroy:function(){z=!1,I("down",l.canvas?n:s,P),I("move",document,A),I("up",document,$)},eventNames:C,getPan:()=>({x:p,y:d}),getScale:()=>u,getOptions:()=>function(t){const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(l),pan:i,reset:function(t){var e={...l,animate:!0,force:!0,...t};return u=f(e.startScale,e).scale,t=h(e.startX,e.startY,u,e),p=t.x,d=t.y,m("panzoomreset",e)},resetStyle:function(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",s.style.cursor="",s.style.userSelect="",s.style.touchAction="",Y(s,"transformOrigin","")},setOptions:function(t={}){for(const e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);(t.hasOwnProperty("cursor")||t.hasOwnProperty("canvas"))&&(n.style.cursor=s.style.cursor="",(l.canvas?n:s).style.cursor=l.cursor),t.hasOwnProperty("overflow")&&(n.style.overflow=t.overflow),t.hasOwnProperty("touchAction")&&(n.style.touchAction=t.touchAction,s.style.touchAction=t.touchAction),(t.hasOwnProperty("minScale")||t.hasOwnProperty("maxScale")||t.hasOwnProperty("contain"))&&a()},setStyle:(t,e)=>Y(s,t,e),zoom:g,zoomIn:function(t){return e(!0,t)},zoomOut:function(t){return e(!1,t)},zoomToPoint:y,zoomWithWheel:function(t,e){t.preventDefault();var n={...l,...e},e=(0===t.deltaY&&t.deltaX?t.deltaX:t.deltaY)<0?1:-1;return y(f(u*Math.exp(e*n.step/3),n).scale,t,n)}}}return t.defaultOptions=D,t});