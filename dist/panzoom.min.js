/**
* Panzoom for panning and zooming elements using CSS transforms
* Copyright Timmy Willison and other contributors
* https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Panzoom=e()}(this,function(){"use strict";function r(t,e){return parseFloat(e[t])||0}function i(t,e,n=window.getComputedStyle(t)){var o="border"===e?"Width":"";return{left:r(`${e}Left${o}`,n),right:r(`${e}Right${o}`,n),top:r(`${e}Top${o}`,n),bottom:r(`${e}Bottom${o}`,n)}}function T(t,e,n){t.style[e]=n}function C(t){const e=t.parentNode;var n=window.getComputedStyle(t),o=window.getComputedStyle(e),r=t instanceof SVGGraphicsElement?t.getBBox():{width:t.offsetWidth,height:t.offsetHeight},a=e.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,margin:i(t,"margin",n),border:i(t,"border",n)},parent:{style:o,width:a.width,height:a.height,top:a.top,bottom:a.bottom,left:a.left,right:a.right,padding:i(e,"padding",o),border:i(e,"border",o)}}}let G={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function N(t,e,n,o){G[t].split(" ").forEach(t=>{e.addEventListener(t,n,o)})}function V(t,e,n){G[t].split(" ").forEach(t=>{e.removeEventListener(t,n)})}"undefined"!=typeof window&&("function"==typeof window.PointerEvent?G={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(G={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));const W=/^http:[\w\.\/]+svg$/;function B(t,e){let n=t.length;for(;n--;)if(t[n].pointerId===e.pointerId)return n;return-1}function I(t,e){let n;if(e.touches){n=0;for(const o of e.touches)o.pointerId=n++,I(t,o)}else n=B(t,e),-1<n&&t.splice(n,1),t.push(e)}function L(t){let e=(t=t.slice(0)).pop();for(var n;n=t.pop();)e={clientX:(n.clientX-e.clientX)/2+e.clientX,clientY:(n.clientY-e.clientY)/2+e.clientY};return e}function Z(t){if(t.length<2)return 0;var e=t[0],t=t[1];return Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2)}
/**
   * Panzoom for panning and zooming elements using CSS transforms
   * https://github.com/timmywil/panzoom
   *
   * Copyright Timmy Willison and other contributors
   * Released under the MIT license
   * https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
   *
   */
const q={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:t=>{t.preventDefault(),t.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,relative:!1,setTransform:function(t,{x:e,y:n,scale:o,isSVG:r},a){T(t,"transform",`scale(${o}) translate(${e}px, ${n}px)`),r&&(r=window.getComputedStyle(t).getPropertyValue("transform"),t.setAttribute("transform",r))},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function t(l,i){if(!l)throw new Error("Panzoom requires an element as an argument");if(1!==l.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(!function(t){const e=t.ownerDocument;return t=t.parentNode,e&&t&&9===e.nodeType&&1===t.nodeType&&e.documentElement.contains(t)}(l))throw new Error("Panzoom should be called on elements that have been attached to the DOM");i={...q,...i};const s=(t=l,W.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase());var t;const n=l.parentNode;n.style.overflow=i.overflow,n.style.userSelect="none",n.style.touchAction=i.touchAction,(i.canvas?n:l).style.cursor=i.cursor,l.style.userSelect="none",l.style.touchAction=i.touchAction,l.style.willChange="transform",T(l,"transformOrigin","string"==typeof i.origin?i.origin:s?"0 0":"50% 50%");let c=0,p=0,d=1,o=!1,r=!1,u=C(l);function a(t,e,n){n.silent||(e=new CustomEvent(t,{detail:e}),l.dispatchEvent(e))}function h(t,e,n){const o={x:c,y:p,scale:d,isSVG:s,originalEvent:n};return requestAnimationFrame(()=>{"boolean"==typeof e.animate&&e.animate!==r&&(e.animate?T(l,"transition",`transform ${e.duration}ms ${e.easing}`):T(l,"transition","none"),r=e.animate),e.setTransform(l,o,e)}),a(t,o,e),a("panzoomchange",o,e),o}function m(){var t,e;i.contain&&(u=C(l),t=u.parent.width-u.parent.border.left-u.parent.border.right,e=u.parent.height-u.parent.border.top-u.parent.border.bottom,t=t/u.elem.width,e=e/u.elem.height,"inside"===i.contain?i.maxScale=Math.min(t,e):"outside"===i.contain&&(i.minScale=Math.max(t,e)))}function f(t,e,n,o){var r={...i,...o};const a={x:c,y:p,opts:r};return!r.force&&(r.disablePan||r.panOnlyWhenZoomed&&d===r.startScale)||(t=parseFloat(t),e=parseFloat(e),r.disableXAxis||(a.x=(r.relative?c:0)+t),r.disableYAxis||(a.y=(r.relative?p:0)+e),"inside"===r.contain?(a.x=Math.max(-u.elem.margin.left-u.parent.padding.left,Math.min(u.parent.width-u.elem.width-u.parent.padding.left-u.elem.margin.left-u.parent.border.left-u.parent.border.right,a.x)),a.y=Math.max(-u.elem.margin.top-u.parent.padding.top,Math.min(u.parent.height-u.elem.height-u.parent.padding.top-u.elem.margin.top-u.parent.border.top-u.parent.border.bottom,a.y))):"outside"===r.contain&&(e=((t=(o=u.elem.width)*n)-o)/2,r=((o=(r=u.elem.height)*n)-r)/2,t=(-(t-u.parent.width)-u.parent.padding.left-u.parent.border.left-u.parent.border.right+e)/n,e=(e-u.parent.padding.left)/n,a.x=Math.max(Math.min(a.x,e),t),o=(-(o-u.parent.height)-u.parent.padding.top-u.parent.border.top-u.parent.border.bottom+r)/n,n=(r-u.parent.padding.top)/n,a.y=Math.max(Math.min(a.y,n),o))),a}function g(t,e){e={...i,...e};const n={scale:d,opts:e};return!e.force&&e.disableZoom||(n.scale=Math.min(Math.max(t,e.minScale),e.maxScale)),n}function y(t,e,n,o){e=f(t,e,d,n),n=e.opts;return c=e.x,p=e.y,h("panzoompan",n,o)}function w(n,o,r){var a=g(n,o),o=a.opts;if(o.force||!o.disableZoom){n=a.scale;let t=c,e=p;o.point?(u=C(l),t=u.elem.width/2-o.point.x-u.elem.width/2/n+u.parent.width/2/n,e=u.elem.height/2-o.point.y-u.elem.height/2/n+u.parent.height/2/n):o.focal&&(i=o.focal,t=(i.x/n-i.x/d+c*n)/n,e=(i.y/n-i.y/d+p*n)/n);var i=f(t,e,n,{relative:!1,force:!0});return c=i.x,p=i.y,d=n,h("panzoomzoom",o,r)}}function e(t,e){e={...i,animate:!0,...e};return w(d*Math.exp((t?1:-1)*e.step),e)}function v(t,e,n,o){var r={width:u.parent.width-u.parent.padding.left-u.parent.padding.right-u.parent.border.left-u.parent.border.right,height:u.parent.height-u.parent.padding.top-u.parent.padding.bottom-u.parent.border.top-u.parent.border.bottom};let a=e.clientX-u.parent.left-u.parent.padding.left-u.parent.border.left-u.elem.margin.left,i=e.clientY-u.parent.top-u.parent.padding.top-u.parent.border.top-u.elem.margin.top;s||(a-=u.elem.width/2,i-=u.elem.height/2);r={x:a/r.width*(r.width*t),y:i/r.height*(r.height*t)};return w(t,{animate:!1,...n,focal:r},o)}w(i.startScale,{animate:!1}),setTimeout(()=>{m(),y(i.startX,i.startY,{animate:!1})});let b,x,S,P,A,E;const O=[];function z(t){!function(e,n){for(let t=e;null!=t;t=t.parentNode)if(o=t,r=n.excludeClass,1===o.nodeType&&o.classList.contains(r)||n.exclude.includes(t))return 1;var o,r}(t.target,i)&&(I(O,t),o=!0,i.handleStartEvent(t),b=c,x=p,u=C(l),a("panzoomstart",{x:c,y:p,scale:d,isSVG:s,originalEvent:t},i),t=L(O),S=t.clientX,P=t.clientY,A=d,E=Z(O))}function M(t){var e;o&&void 0!==b&&void 0!==x&&void 0!==S&&void 0!==P&&(I(O,t),e=L(O),1<O.length?(0===E&&(E=Z(O)),v(g((Z(O)-E)*i.step/80+A).scale,e)):y(b+(e.clientX-S)/d,x+(e.clientY-P)/d,{animate:!1},t))}function X(t){1===O.length&&a("panzoomend",{x:c,y:p,scale:d,isSVG:s,originalEvent:t},i),function(t,e){if(e.touches)for(;t.length;)t.pop();else{e=B(t,e);-1<e&&t.splice(e,1)}}(O,t),o&&(o=!1,b=x=S=P=void 0)}let Y=!1;function $(){Y||(Y=!0,N("down",i.canvas?n:l,z),N("move",document,M,{passive:!0}),N("up",document,X,{passive:!0}))}return i.noBind||$(),{bind:$,destroy:function(){Y=!1,V("down",i.canvas?n:l,z),V("move",document,M),V("up",document,X)},eventNames:G,getPan:()=>({x:c,y:p}),getScale:()=>d,getOptions:()=>function(t){const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(i),pan:y,reset:function(t){var e={...i,animate:!0,force:!0,...t};return d=g(e.startScale,e).scale,t=f(e.startX,e.startY,d,e),c=t.x,p=t.y,h("panzoomreset",e)},resetStyle:function(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",l.style.cursor="",l.style.userSelect="",l.style.touchAction="",T(l,"transformOrigin","")},setOptions:function(t={}){for(const e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);(t.hasOwnProperty("cursor")||t.hasOwnProperty("canvas"))&&(n.style.cursor=l.style.cursor="",(i.canvas?n:l).style.cursor=i.cursor),t.hasOwnProperty("overflow")&&(n.style.overflow=t.overflow),t.hasOwnProperty("touchAction")&&(n.style.touchAction=t.touchAction,l.style.touchAction=t.touchAction),(t.hasOwnProperty("minScale")||t.hasOwnProperty("maxScale")||t.hasOwnProperty("contain"))&&m()},setStyle:(t,e)=>T(l,t,e),zoom:w,zoomIn:function(t){return e(!0,t)},zoomOut:function(t){return e(!1,t)},zoomToPoint:v,zoomWithWheel:function(t,e){t.preventDefault();var n={...i,...e},e=(0===t.deltaY&&t.deltaX?t.deltaX:t.deltaY)<0?1:-1;return v(g(d*Math.exp(e*n.step/3),n).scale,t,n)}}}return t.defaultOptions=q,t});