/**
* Panzoom for panning and zooming elements using CSS transforms
* Copyright Timmy Willison and other contributors
* https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Panzoom=t()}(this,function(){"use strict";const p=!!window.CSS&&!!CSS.number,d=p?new CSSScale(CSS.number(1),CSS.number(1)):null,u=p?new CSSTranslate(CSS.px(0),CSS.px(0)):null,m=p?new CSSTransformValue([u,d]):null;function r(e,t){return parseFloat(t[e])||0}function i(e,t,n=window.getComputedStyle(e)){var o="border"===t?"Width":"";return{left:r(t+"Left"+o,n),right:r(t+"Right"+o,n),top:r(t+"Top"+o,n),bottom:r(t+"Bottom"+o,n)}}function V(e,t,n){e.style[t]=n}function G(e){var t=e.parentNode,n=window.getComputedStyle(e),o=window.getComputedStyle(t),r=e instanceof SVGGraphicsElement?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight},a=t.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,margin:i(e,"margin",n),border:i(e,"border",n)},parent:{style:o,width:a.width,height:a.height,top:a.top,bottom:a.bottom,left:a.left,right:a.right,padding:i(t,"padding",o),border:i(t,"border",o)}}}let N={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function W(e,t,n,o){N[e].split(" ").forEach(e=>{t.addEventListener(e,n,o)})}function B(e,t,n){N[e].split(" ").forEach(e=>{t.removeEventListener(e,n)})}"undefined"!=typeof window&&("function"==typeof window.PointerEvent?N={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(N={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));const D=/^http:[\w\.\/]+svg$/;function I(e,t){let n=e.length;for(;n--;)if(e[n].pointerId===t.pointerId)return n;return-1}function L(e,t){let n;if(t.touches){n=0;for(const o of t.touches)o.pointerId=n++,L(e,o)}else-1<(n=I(e,t))&&e.splice(n,1),e.push(t)}function Z(e){let t=(e=e.slice(0)).pop();for(var n;n=e.pop();)t={clientX:(n.clientX-t.clientX)/2+t.clientX,clientY:(n.clientY-t.clientY)/2+t.clientY};return t}function $(e){var t;return e.length<2?0:(t=e[0],e=e[1],Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2))}
/**
   * Panzoom for panning and zooming elements using CSS transforms
   * https://github.com/timmywil/panzoom
   *
   * Copyright Timmy Willison and other contributors
   * Released under the MIT license
   * https://github.com/timmywil/panzoom/blob/master/MIT-License.txt
   *
   */
const q={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:e=>{e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,relative:!1,setTransform:function(e,{x:t,y:n,scale:o,isSVG:r},a){var i,l,s,c;p?(i=e,l=o*t,s=o*n,c=o,d.x.value=c,d.y.value=c,u.x.value=l,u.y.value=s,i.attributeStyleMap.set("transform",m)):V(e,"transform",`translate(${o*t}px, ${o*n}px) scale(${o})`),r&&(c=window.getComputedStyle(e).getPropertyValue("transform"),e.setAttribute("transform",c))},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function e(i,c){if(!i)throw new Error("Panzoom requires an element as an argument");if(1!==i.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(t=(e=i).ownerDocument,e=e.parentNode,!(t&&e&&9===t.nodeType&&1===e.nodeType&&t.documentElement.contains(e)))throw new Error("Panzoom should be called on elements that have been attached to the DOM");var e,t;c={...q,...c};t=i;const s=D.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase(),n=i.parentNode;n.style.overflow=c.overflow,n.style.userSelect="none",n.style.touchAction=c.touchAction,(c.canvas?n:i).style.cursor=c.cursor,i.style.userSelect="none",i.style.touchAction=c.touchAction,i.style.willChange="transform",V(i,"transformOrigin","string"==typeof c.origin?c.origin:s?"0 0":"50% 50%");let p=0,d=0,u=1,o=!1,r=!1,m=G(i);function a(e,t,n){n.silent||(n=new CustomEvent(e,{detail:t}),i.dispatchEvent(n))}function l(e,t,n){const o={x:p,y:d,scale:u,isSVG:s,originalEvent:n};return requestAnimationFrame(()=>{"boolean"==typeof t.animate&&t.animate!==r&&(t.animate?V(i,"transition",`transform ${t.duration}ms `+t.easing):V(i,"transition","none"),r=t.animate),t.setTransform(i,o,t),a(e,o,t),a("panzoomchange",o,t)}),o}function h(){var e,t;c.contain&&(e=(m=G(i)).parent.width-m.parent.border.left-m.parent.border.right,t=m.parent.height-m.parent.border.top-m.parent.border.bottom,e=e/(m.elem.width||1),t=t/(m.elem.height||1),"inside"===c.contain?c.maxScale=Math.min(e,t):"outside"===c.contain&&(c.minScale=Math.max(e,t)))}function f(e,t,n,o){var r,a,i,l,o={...c,...o},s={x:p,y:d,opts:o};return!o.force&&(o.disablePan||o.panOnlyWhenZoomed&&u===o.startScale)||(e=parseFloat(e),t=parseFloat(t),o.disableXAxis||(s.x=(o.relative?p:0)+e),o.disableYAxis||(s.y=(o.relative?d:0)+t),o.contain&&(e=((t=(e=m.elem.width)*n)-e)/2,a=((r=(a=m.elem.height)*n)-a)/2,"inside"===o.contain?(i=(-m.elem.margin.left-m.parent.padding.left+e)/n,l=(m.parent.width-t-m.parent.padding.left-m.elem.margin.left-m.parent.border.left-m.parent.border.right+e)/n,s.x=Math.max(Math.min(s.x,l),i),l=(-m.elem.margin.top-m.parent.padding.top+a)/n,i=(m.parent.height-r-m.parent.padding.top-m.elem.margin.top-m.parent.border.top-m.parent.border.bottom+a)/n,s.y=Math.max(Math.min(s.y,i),l)):"outside"===o.contain&&(i=(-(t-m.parent.width)-m.parent.padding.left-m.parent.border.left-m.parent.border.right+e)/n,l=(e-m.parent.padding.left)/n,s.x=Math.max(Math.min(s.x,l),i),t=(-(r-m.parent.height)-m.parent.padding.top-m.parent.border.top-m.parent.border.bottom+a)/n,e=(a-m.parent.padding.top)/n,s.y=Math.max(Math.min(s.y,e),t))),o.roundPixels&&(s.x=Math.round(s.x),s.y=Math.round(s.y))),s}function g(e,t){var t={...c,...t},n={scale:u,opts:t};return!t.force&&t.disableZoom||(n.scale=Math.min(Math.max(e,t.minScale),t.maxScale)),n}function y(e,t,n,o){e=f(e,t,u,n);return p!==e.x||d!==e.y?(p=e.x,d=e.y,l("panzoompan",e.opts,o)):{x:p,y:d,scale:u,isSVG:s,originalEvent:o}}function v(n,o,r){var o=g(n,o),a=o.opts;if(a.force||!a.disableZoom){n=o.scale;let e=p,t=d;a.point?(m=G(i),e=m.elem.width/2-a.point.x-m.elem.width/2/n+m.parent.width/2/n,t=m.elem.height/2-a.point.y-m.elem.height/2/n+m.parent.height/2/n):a.focal&&(o=a.focal,e=(o.x/n-o.x/u+p*n)/n,t=(o.y/n-o.y/u+d*n)/n);o=f(e,t,n,{relative:!1,force:!0});return p=o.x,d=o.y,u=n,l("panzoomzoom",a,r)}}function w(e,t){t={...c,animate:!0,...t};return v(u*Math.exp((e?1:-1)*t.step),t)}function x(e,t,n,o){const r=m.parent.width-m.parent.padding.left-m.parent.padding.right-m.parent.border.left-m.parent.border.right,a=m.parent.height-m.parent.padding.top-m.parent.padding.bottom-m.parent.border.top-m.parent.border.bottom;let i=t.clientX-m.parent.left-m.parent.padding.left-m.parent.border.left-m.elem.margin.left,l=t.clientY-m.parent.top-m.parent.padding.top-m.parent.border.top-m.elem.margin.top;s||(i-=m.elem.width/2,l-=m.elem.height/2);t={x:i/r*(r*e),y:l/a*(a*e)};return v(e,{...n,animate:!1,focal:t},o)}v(c.startScale,{animate:!1,force:!0}),setTimeout(()=>{h(),y(c.startX,c.startY,{animate:!1,force:!0})});let b,S,P,M,C,E;const A=[];function O(e){!function(t,n){for(let e=t;null!=e;e=e.parentNode)if(o=e,r=n.excludeClass,1===o.nodeType&&o.classList.contains(r)||n.exclude.includes(e))return 1;var o,r}(e.target,c)&&(L(A,e),o=!0,c.handleStartEvent(e),b=p,S=d,m=G(i),a("panzoomstart",{x:p,y:d,scale:u,isSVG:s,originalEvent:e},c),e=Z(A),P=e.clientX,M=e.clientY,C=u,E=$(A))}function z(e){var t;o&&void 0!==b&&void 0!==S&&void 0!==P&&void 0!==M&&(L(A,e),t=Z(A),1<A.length?(0===E&&(E=$(A)),x(g(($(A)-E)*c.step/80+C).scale,t,{animate:!1},e)):y(b+(t.clientX-P)/u,S+(t.clientY-M)/u,{animate:!1},e))}function X(e){1===A.length&&a("panzoomend",{x:p,y:d,scale:u,isSVG:s,originalEvent:e},c);var t=A;if(e.touches)for(;t.length;)t.pop();else{e=I(t,e);-1<e&&t.splice(e,1)}o&&(o=!1,b=S=P=M=void 0)}let Y=!1;function T(){Y||(Y=!0,W("down",c.canvas?n:i,O),W("move",document,z,{passive:!0}),W("up",document,X,{passive:!0}))}return c.noBind||T(),{bind:T,destroy:function(){Y=!1,B("down",c.canvas?n:i,O),B("move",document,z),B("up",document,X)},eventNames:N,getPan:()=>({x:p,y:d}),getScale:()=>u,getOptions:()=>{var e=c,t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},handleDown:O,handleMove:z,handleUp:X,pan:y,reset:function(e){var e={...c,animate:!0,force:!0,...e},t=(u=g(e.startScale,e).scale,f(e.startX,e.startY,u,e));return p=t.x,d=t.y,l("panzoomreset",e)},resetStyle:function(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",i.style.cursor="",i.style.userSelect="",i.style.touchAction="",V(i,"transformOrigin","")},setOptions:function(e={}){for(const t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);(e.hasOwnProperty("cursor")||e.hasOwnProperty("canvas"))&&(n.style.cursor=i.style.cursor="",(c.canvas?n:i).style.cursor=c.cursor),e.hasOwnProperty("overflow")&&(n.style.overflow=e.overflow),e.hasOwnProperty("touchAction")&&(n.style.touchAction=e.touchAction,i.style.touchAction=e.touchAction),(e.hasOwnProperty("minScale")||e.hasOwnProperty("maxScale")||e.hasOwnProperty("contain"))&&h()},setStyle:(e,t)=>V(i,e,t),zoom:v,zoomIn:function(e){return w(!0,e)},zoomOut:function(e){return w(!1,e)},zoomToPoint:x,zoomWithWheel:function(e,t){e.preventDefault();var t={...c,...t,animate:!1},n=(0===e.deltaY&&e.deltaX?e.deltaX:e.deltaY)<0?1:-1;return x(g(u*Math.exp(n*t.step/3),t).scale,e,t,e)}}}return e.defaultOptions=q,e});